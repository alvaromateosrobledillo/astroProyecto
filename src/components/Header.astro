---
import ThemeToggle from "./ThemeToggle.astro";

const navItems = [
  { title: "INICIO", url: "/" },
  { title: "SERVICIOS", url: "/#servicios" },
  { title: "PROYECTOS", url: "/#proyectos" },
  { title: "CONTACTO", url: "/#contacto" },
];
---

<header class="fixed top-0 z-30 w-full bg-lightBackground dark:bg-darkBackground shadow-md">
  <div class="container mx-auto flex justify-between items-center py-4 px-6">
    <a href="/" class="flex items-center space-x-2">
      <img src="/logo_martina.png" alt="EnergÃ­a Solar La Martina logo" class="h-10 w-10" />
      <span class="text-2xl font-bold text-primary dark:text-primary">La Martina</span>
    </a>
    <nav class="hidden md:flex space-x-8">
      {navItems.map(link => (
        <a class="text-lg font-medium text-lightText dark:text-darkText hover:text-primary transition-colors" href={link.url}>
          {link.title}
        </a>
      ))}
    </nav>
    <div class="flex items-center space-x-4">
      <ThemeToggle />
      <button class="md:hidden text-lightText dark:text-darkText focus:outline-none" id="menu-button">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>
  <div class="hidden fixed inset-0 bg-black bg-opacity-50 z-20" id="sidebar-overlay"></div>
  <aside class="hidden fixed inset-y-0 left-0 w-64 bg-lightBackground dark:bg-darkBackground shadow-lg z-30 transform -translate-x-full transition-transform" id="sidebar">
    <div class="p-4">
      <button class="text-lightText dark:text-darkText focus:outline-none" id="close-sidebar">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      <nav class="mt-8 space-y-4">
        {navItems.map(link => (
          <a class="block text-lg font-medium text-lightText dark:text-darkText hover:text-primary transition-colors" href={link.url}>
            {link.title}
          </a>
        ))}
      </nav>
    </div>
  </aside>
</header>

<script>
  document.addEventListener("astro:page-load", () => {
    const menuButton = document.getElementById("menu-button");
    const sidebar = document.getElementById("sidebar");
    const closeSidebar = document.getElementById("close-sidebar");
    const overlay = document.getElementById("sidebar-overlay");

    if (menuButton && sidebar && closeSidebar && overlay) {
      menuButton.addEventListener("click", () => {
        sidebar.classList.toggle("hidden");
        sidebar.classList.toggle("-translate-x-full");
        overlay.classList.toggle("hidden");
      });

      closeSidebar.addEventListener("click", () => {
        sidebar.classList.toggle("hidden");
        sidebar.classList.toggle("-translate-x-full");
        overlay.classList.toggle("hidden");
      });

      overlay.addEventListener("click", () => {
        sidebar.classList.toggle("hidden");
        sidebar.classList.toggle("-translate-x-full");
        overlay.classList.toggle("hidden");
      });
    }
  });
</script>
